---
layout: compress
---
<!doctype html>
<html lang="en" class="no-js">
  <head>
  {% include head.html %}
  {% include head/custom.html %}
  <!-- 保存全局数据供SPA使用 -->
  <script>
    // 在页面初始加载时储存旅行数据
    window.siteData = {
      travelCities: {{ site.data.travel.cities | jsonify }}
    };
  </script>
  
  <!-- 添加确保一致性的样式 -->
  <style>
    .masthead {
      position: sticky;
      top: 0;
      z-index: 1000;
      background-color: #fff;
      width: 100%;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    
    #main {
      display: flex;
      flex-wrap: wrap;
      margin-top: 1em;
      min-height: 80vh; /* 确保最小高度 */
    }
    
    .sidebar {
      position: sticky;
      top: 80px; /* 根据您的导航栏高度调整 */
      height: calc(100vh - 80px);
      overflow-y: auto;
      padding-right: 15px;
      align-self: flex-start;
    }
    
    .page {
      flex: 1;
      min-width: 0;
      padding-left: 15px;
      padding-right: 15px;
      /* 确保内容区域有足够高度与侧边栏一致 */
      min-height: calc(100vh - 100px);
    }
    
    /* 在移动设备上调整样式 */
    @media screen and (max-width: 767px) {
      .sidebar {
        position: static;
        width: 100%;
        height: auto;
        padding-right: 0;
      }
      
      #main {
        flex-direction: column;
      }
      
      .page {
        width: 100%;
        padding: 0 10px;
      }
    }
  </style>
</head>
  <body>
    {% include browser-upgrade.html %}
    {% include masthead.html %}
    <div id="main" role="main">
      {% include sidebar.html %}
    
      <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
        {% if page.title %}
          <meta itemprop="headline" content="{{ page.title | markdownify | strip_html | strip_newlines | escape_once }}">
        {% endif %}
        
        <div class="page__inner-wrap" id="main-content">
          <section class="page__content" itemprop="text">
            {{ content }}
          </section>
        </div>
      </article>
    </div>
    {% include scripts.html %}
    <!-- 引入 spa.js -->
    <script src="/assets/js/spa.js"></script>
    
    <!-- 添加确保布局一致性的脚本 -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // 计算并设置一致的高度
        function setConsistentHeight() {
          const sidebar = document.querySelector('.sidebar');
          const pageContent = document.querySelector('.page');
          const mainContainer = document.getElementById('main');
          const masthead = document.querySelector('.masthead');
          
          if (sidebar && pageContent && masthead && window.innerWidth > 767) {
            // 获取视窗高度和导航栏高度
            const viewportHeight = window.innerHeight;
            const mastheadHeight = masthead.offsetHeight;
            
            // 设置主容器最小高度
            const mainMinHeight = viewportHeight - mastheadHeight - 40; // 减去一些边距
            mainContainer.style.minHeight = `${mainMinHeight}px`;
            
            // 设置内容区域最小高度，确保与侧边栏一致
            const contentMinHeight = mainMinHeight;
            pageContent.style.minHeight = `${contentMinHeight}px`;
          }
        }
        
        // 初始设置
        setConsistentHeight();
        
        // 窗口大小变化时重新计算
        window.addEventListener('resize', setConsistentHeight);
        
        // 页面加载完成后再次检查（处理可能的图片加载导致的高度变化）
        window.addEventListener('load', setConsistentHeight);
        
        // 监听内容变化，确保高度一致性
        const contentObserver = new MutationObserver(function(mutations) {
          // 使用setTimeout给DOM有时间更新
          setTimeout(setConsistentHeight, 100);
        });
        
        const contentArea = document.querySelector('.page__content');
        if (contentArea) {
          contentObserver.observe(contentArea, {
            childList: true,
            subtree: true,
            attributes: true
          });
        }
      });
    </script>
  </body>
</html>
